webpackJsonp([8],{"/wAz":function(e,t){},"0xDb":function(e,t,n){"use strict";var o=n("Zrlr"),r=n.n(o),s=n("wxAW"),a=n.n(s),c=function(){function e(){r()(this,e),this.formatDate=this.formatDate.bind(this)}return a()(e,[{key:"formatDate",value:function(e){var t=new Date(e),n=(new Date).getTime()-t.getTime();return n<0?"":n/1e3<60?"刚刚":n/6e4<60?parseInt(n/6e4,10)+"分钟前":n/36e5<24?parseInt(n/36e5,10)+"小时前":n/864e5<31?parseInt(n/864e5,10)+"天前":n/2592e6<12?parseInt(n/2592e6,10)+"月前":parseInt(n/31536e6,10)+"年前"}},{key:"localItem",value:function(e,t){return 1===arguments.length?localStorage.getItem(e):localStorage.setItem(e,t)}},{key:"removeLocalItem",value:function(e){return e?localStorage.removeItem(e):localStorage.removeItem()}},{key:"switchTabs",value:function(e){switch(e){case"ask":return"问答";case"share":return"分享";case"job":return"招聘";case"good":return"精华";case"dev":return"测试";default:return}}}]),e}();t.a=new c},Bzy4:function(e,t){},ETNL:function(e,t){},FW5l:function(e,t){},GI30:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("/5sW"),r=n("0xDb"),s={data:function(){return{activeIndex:"topics"}},props:{isLogin:Boolean},methods:{loginOut:function(){var e=this;this.$confirm("你确定要退出吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$store.dispatch("setUserInfo",{}),r.a.removeLocalItem("userKey"),e.$message({type:"success",message:"该用户已退出!"})}).catch(function(){e.$message({type:"info",message:"取消操作！"})})}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header-wrap"},[n("div",{staticClass:"header-logo",on:{click:function(t){e.$router.push("/")}}},[n("img",{attrs:{src:"https://cnodejs.org/public/images/cnodejs_light.svg"}})]),e._v(" "),n("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal",router:!0,"background-color":"#545c64","text-color":"#fff","active-text-color":"#fff"}},[n("el-menu-item",{attrs:{index:"/topics"}},[e._v("首页")]),e._v(" "),n("el-menu-item",{attrs:{index:"/messages"}},[e._v("消息")]),e._v(" "),e.isLogin?n("el-menu-item",{attrs:{index:"/"},on:{click:e.loginOut}},[e._v("退出")]):n("el-menu-item",{attrs:{index:"/login"}},[e._v("登陆")])],1)],1)},staticRenderFns:[]};var c=n("VU/8")(s,a,!1,function(e){n("FW5l")},"data-v-33493187",null).exports,i={name:"Top",data:function(){return{isShow:!1}},mounted:function(){var e=this;window.onscroll=function(){var t=document.documentElement.scrollTop||document.body.scrollTop;e.isShow=t>300}},methods:{toTop:function(){var e=setInterval(function(){var t=document.body.scrollTop||document.documentElement.scrollTop,n=t/4;0!=document.body.scrollTop?document.body.scrollTop-=n:document.documentElement.scrollTop-=n,0==t&&clearInterval(e)},30)}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"fade"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:this.isShow,expression:"isShow"}],staticClass:"toTop",on:{click:this.toTop}},[t("i",{staticClass:"el-icon-caret-top"})])])},staticRenderFns:[]};var l=n("VU/8")(i,u,!1,function(e){n("Ndln")},"data-v-1632dab0",null).exports,m=(n("sfy8"),{name:"App",components:{"v-header":c,"v-top":l},computed:{userInfo:function(){return this.$store.state.userInfo}}}),d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("el-container",[t("el-header",{attrs:{id:"header"}},[t("v-header",{attrs:{isLogin:this.userInfo.success}})],1),this._v(" "),t("router-view",{attrs:{id:"wrap"}})],1),this._v(" "),t("v-top")],1)},staticRenderFns:[]};var p=n("VU/8")(m,d,!1,function(e){n("Bzy4")},null,null).exports,f=n("/ocq"),h=function(){return n.e(5).then(n.bind(null,"i/Eh"))};o.default.use(f.a);var g=new f.a({routes:[{path:"/",redirect:"topics"},{path:"/login",name:"Login",component:function(){return n.e(3).then(n.bind(null,"lmfZ"))}},{path:"/topics",name:"Topics",component:function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,"qei0"))}},{path:"/topics/:id",name:"Article",component:function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,"UbIS"))}},{path:"/user",name:"Mine",component:h,alias:"/mine"},{path:"/user/:loginname",name:"User",component:h},{path:"/messages",name:"Messages",component:function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,"zar1"))}},{path:"/create",name:"Create",component:function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,"tc1Z"))}}]}),v=n("NYxO");o.default.use(v.a);var b=new v.a.Store({state:{userInfo:{success:!1}},getters:{getUserInfo:function(e){return e.userInfo}},mutations:{setUserInfo:function(e,t){e.userInfo=t}},actions:{setUserInfo:function(e,t){(0,e.commit)("setUserInfo",t)}}}),I=n("zL8q"),w=n.n(I),T=n("HSQo"),k=n.n(T),y=n("//Fk"),x=n.n(y),L=n("mtWM"),_=n.n(L),U={method:"get",baseURL:"https://cnodejs.org/api/v1",headers:{"Content-Type":"application/json;charset=UTF-8"},data:{},timeout:1e4,withCredentials:!1,responseType:"json"},C=n("mw3O"),S=n.n(C);function E(e){return new x.a(function(t,n){var o=_.a.create({baseURL:U.baseURL,headers:{},transformResponse:[function(e){return e}]});o.interceptors.request.use(function(e){return"post"!==e.method.toLocaleLowerCase()&&"put"!==e.method.toLocaleLowerCase()&&"delete"!==e.method.toLocaleLowerCase()||(e.data=S.a.stringify(e.data)),e},function(e){console.log("request:",e),"ECONNABORTED"===e.code&&-1!==e.message.indexOf("timeout")&&console.log("根据你设置的timeout/真的请求超时 判断请求现在超时了，你可以在这里加入超时的处理方案");var t=e.response;if(console.log(t),t){var n=t.status;router.push({path:"/error/"+n})}return x.a.reject(e)}),o.interceptors.response.use(function(e){var t=void 0;return(t=void 0==e.data?e.request.responseText:e.data).code,t},function(e){if(e&&e.response)switch(e.response.status){case 400:e.message="请求错误";break;case 401:e.message="用户错误";break;case 403:e.message="拒绝访问";break;case 404:e.message="请求地址出错: "+e.response.config.url;break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持"}return console.error(e),x.a.reject(e)}),o(e).then(function(e){return t(e),!1}).catch(function(e){n(e)})})}var N={getTopics:function(e){return E({url:"/topics",method:"get",params:e})},getArticle:function(e,t){return E({url:"/topic/"+e,method:"get",params:t})},getUser:function(e,t){return E({url:"/user/"+e,method:"get",params:t})},checkKey:function(e){return E({url:"/accesstoken",method:"post",data:e})},replyUps:function(e,t){return E({url:"/reply/"+e+"/ups",method:"post",data:t})},topicReply:function(e,t){return E({url:"/topic/"+e+"/replies",method:"post",data:t})},getMsg:function(e){return E({url:"/messages",method:"get",params:e})},msgMarkOne:function(e,t){return E({url:"/message/mark_one/"+e,method:"post",data:t})},createTopics:function(e){return E({url:"/topics",method:"post",data:e})}},O=function e(t){e.installed||(e.installed=!0,k()(t.prototype,{$api:{get:function(){return N}}}))};n("GI30"),n("/wAz"),n("ETNL"),n("c6JL"),n("Qbok");o.default.config.productionTip=!1,o.default.use(w.a,{size:"small",zIndex:3e3}),o.default.use(O),r.a.localItem("userKey")&&b.dispatch("setUserInfo",JSON.parse(r.a.localItem("userKey"))),new o.default({el:"#app",router:g,store:b,render:function(e){return e(p)}})},Ndln:function(e,t){},Qbok:function(e,t){},c6JL:function(e,t){},sfy8:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c0cc329a6bb950540bd4.js.map