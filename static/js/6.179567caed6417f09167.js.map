{"version":3,"sources":["webpack:///src/views/Messages.vue","webpack:///./src/views/Messages.vue?46df","webpack:///./src/views/Messages.vue"],"names":["Messages","name","data","msgs","hasnot_read_messages","has_read_messages","created","this","getMsg","computed","userInfo","$store","state","components","v-aside-user","AsideUser","v-aside-qr","AsideQR","methods","_this","$api","accesstoken","mdrender","then","res","JSON","parse","formatDate","time","utils","markOne","msg_id","msgMarkOne","views_Messages","render","_vm","_h","$createElement","_c","_self","staticClass","_v","length","_l","item","key","id","attrs","tag","to","author","loginname","src","avatar_url","title","topic","on","click","$event","_s","reply","content","create_at","width","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/6.179567caed6417f09167.js","sourcesContent":["<template>\n  <el-container>\n    <el-main class=\"messages\">\n      <section class=\"messages-wrap\">\n        <header class=\"messages-header\">\n          未读消息\n        </header>\n        <ul v-if=\"msgs.hasnot_read_messages.length>0\" class=\"topics-list\">\n          <li\n            class=\"topics-list-li\"\n            v-for=\"item in msgs.hasnot_read_messages\"\n            :key=\"item.id\">\n              <router-link\n                tag=\"img\"\n                :to=\"'/user/'+item.author.loginname\"\n                class=\"topics-avatar\"\n                :src=\"item.author.avatar_url\"\n                :title=\"item.author.loginname\"\n               />\n              <div class=\"topics-list-content\">\n                <router-link\n                  @click=\"markOne(item.id)\"\n                  class=\"topics-title\"\n                  :to=\"'/topics/'+item.topic.id +'#'+ item.id\"\n                  :title=\"item.topic.title\">\n                  {{item.topic.title}}\n                </router-link>\n                <div class=\"topics-list-wrap\">\n                  <p class=\"topics-reply\">\n                    {{item.author.loginname}}\n                    ：\n                    {{item.reply.content}}\n                  </p>\n                  <span\n                    class=\"topics-time\"\n                    title=\"回复时间\">\n                    {{formatDate(item.reply.create_at)}}\n                  </span>\n                </div>\n              </div>\n          </li>\n        </ul>\n        <p v-else class=\"msgs-null\">没有消息</p>\n      </section>\n      <section class=\"messages-wrap\">\n        <header class=\"messages-header\">\n          已读消息\n        </header>\n        <ul v-if=\" msgs.has_read_messages.length>0\" class=\"topics-list\">\n          <li\n            class=\"topics-list-li\"\n            v-for=\"item in msgs.has_read_messages\"\n            :key=\"item.id\">\n              <router-link\n                tag=\"img\"\n                :to=\"'/user/'+item.author.loginname\"\n                class=\"topics-avatar\"\n                :src=\"item.author.avatar_url\"\n                :title=\"item.author.loginname\"\n               />\n              <div\n                class=\"topics-list-content\"\n                @click=\"markOne(item.id)\">\n                <router-link\n                  class=\"topics-title\"\n                  :to=\"'/topics/'+item.topic.id +'#'+ item.id\"\n                  :title=\"item.topic.title\">\n                  {{item.topic.title}}\n                </router-link>\n                <div class=\"topics-list-wrap\">\n                  <p class=\"topics-reply\">\n                    {{item.author.loginname}}\n                    ：\n                    {{item.reply.content}}\n                  </p>\n                  <span\n                    class=\"topics-time\"\n                    title=\"回复时间\">\n                    {{formatDate(item.reply.create_at)}}\n                  </span>\n                </div>\n              </div>\n          </li>\n        </ul>\n        <p v-else class=\"msgs-null\">没有消息</p>\n      </section>\n    </el-main>\n    <el-aside class=\"hidden-sm-and-down\"  width=\"200px\">\n      <v-aside-user :userInfo=\"userInfo\"></v-aside-user>\n      <v-aside-qr></v-aside-qr>\n    </el-aside>\n  </el-container>\n</template>\n\n<script>\nimport AsideUser from '@/components/AsideUser'\nimport AsideQR from '@/components/AsideQR'\nimport Tool from \"@/utils\"\n\nexport default{\n  name:'Messages',\n  data(){\n    return{\n      msgs:{\n        hasnot_read_messages:[],\n        has_read_messages:[],\n      }\n    }\n  },\n  created() {\n    this.getMsg();\n  },\n  computed:{\n    userInfo(){\n      return this.$store.state.userInfo\n    }\n  },\n  components:{\n    'v-aside-user':AsideUser,\n    'v-aside-qr':AsideQR,\n  },\n  methods:{\n    getMsg(){\n      this.$api.getMsg({accesstoken:this.userInfo.accesstoken,mdrender:'false'})\n      .then(res => {return JSON.parse(res)})\n      .then(res => {\n        this.msgs = res.data;\n      })\n    },\n    formatDate(time){\n      return Tool.formatDate(time)\n    },\n    markOne(msg_id){\n      // console.log(msg_id)\n      this.$api.msgMarkOne(msg_id,{accesstoken:this.userInfo.accesstoken})\n      // .then(res => {return JSON.parse(res)})\n      // .then(res => {\n      //   //res\n      // })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.messages{\n\n  .messages-wrap{\n    overflow: hidden;\n    background: #fff;\n    padding: 0px;\n    box-shadow: 0 2px 12px 0 rgba(0,0,0,.1);\n    margin-bottom: 20px;\n    .messages-header{\n      line-height: 35px;\n      color: #999;\n      background: #f6f6f6;\n      font-size: 14px;\n      overflow: hidden;\n      list-style: none;\n      padding: 0 10px;\n    }\n    .topics-list{\n      overflow: hidden;\n      margin: 0px;\n      list-style: none;\n      padding: 0;\n      .topics-list-li{\n        overflow: hidden;\n        display: flex;\n        align-items: center;\n        border-bottom: 1px solid #ddd;\n        padding: 4px 10px;\n        background-color: #fff;\n        transition: background-color 0.3s;\n        &:hover{\n          background: #f2f2f2;\n        }\n        &:last-child{\n          border-bottom: none;\n        }\n        .topics-avatar{\n          width: 40px;\n          height: 40px;\n          border-radius: 50%;\n          margin-right: 10px;\n        }\n        .topics-tabs{\n          margin: 0 10px;\n          background: rgb(145, 228, 86);\n          color: #fff;\n          padding: 2px 5px;\n          border-radius: 5px;\n          font-size: 12px;\n        }\n        .topics-tabs-top{\n          background: rgb(255, 91, 5);\n        }\n        .topics-list-content{\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          font-size: 14px;\n          overflow: hidden;\n          .topics-title{\n            margin: 0;\n            padding: 8px 2px;\n            text-decoration: none;\n            color: #333;\n            &:active{\n              color: #999;\n            }\n          }\n          .topics-list-wrap{\n            font-size: 12px;\n            color: #777;\n            .topics-reply{\n              float: left;\n              margin: 0;\n              width: 88%;\n              text-overflow: ellipsis;\n              overflow: hidden;\n              white-space: nowrap;\n            }\n            .topics-time{\n              float: right;\n            }\n          }\n        }\n      }\n    }\n    .msgs-null{\n      margin: 10px;\n      color: #999;\n    }\n  }\n\n}\n\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/Messages.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-container',[_c('el-main',{staticClass:\"messages\"},[_c('section',{staticClass:\"messages-wrap\"},[_c('header',{staticClass:\"messages-header\"},[_vm._v(\"\\n        未读消息\\n      \")]),_vm._v(\" \"),(_vm.msgs.hasnot_read_messages.length>0)?_c('ul',{staticClass:\"topics-list\"},_vm._l((_vm.msgs.hasnot_read_messages),function(item){return _c('li',{key:item.id,staticClass:\"topics-list-li\"},[_c('router-link',{staticClass:\"topics-avatar\",attrs:{\"tag\":\"img\",\"to\":'/user/'+item.author.loginname,\"src\":item.author.avatar_url,\"title\":item.author.loginname}}),_vm._v(\" \"),_c('div',{staticClass:\"topics-list-content\"},[_c('router-link',{staticClass:\"topics-title\",attrs:{\"to\":'/topics/'+item.topic.id +'#'+ item.id,\"title\":item.topic.title},on:{\"click\":function($event){_vm.markOne(item.id)}}},[_vm._v(\"\\n                \"+_vm._s(item.topic.title)+\"\\n              \")]),_vm._v(\" \"),_c('div',{staticClass:\"topics-list-wrap\"},[_c('p',{staticClass:\"topics-reply\"},[_vm._v(\"\\n                  \"+_vm._s(item.author.loginname)+\"\\n                  ：\\n                  \"+_vm._s(item.reply.content)+\"\\n                \")]),_vm._v(\" \"),_c('span',{staticClass:\"topics-time\",attrs:{\"title\":\"回复时间\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.formatDate(item.reply.create_at))+\"\\n                \")])])],1)],1)})):_c('p',{staticClass:\"msgs-null\"},[_vm._v(\"没有消息\")])]),_vm._v(\" \"),_c('section',{staticClass:\"messages-wrap\"},[_c('header',{staticClass:\"messages-header\"},[_vm._v(\"\\n        已读消息\\n      \")]),_vm._v(\" \"),( _vm.msgs.has_read_messages.length>0)?_c('ul',{staticClass:\"topics-list\"},_vm._l((_vm.msgs.has_read_messages),function(item){return _c('li',{key:item.id,staticClass:\"topics-list-li\"},[_c('router-link',{staticClass:\"topics-avatar\",attrs:{\"tag\":\"img\",\"to\":'/user/'+item.author.loginname,\"src\":item.author.avatar_url,\"title\":item.author.loginname}}),_vm._v(\" \"),_c('div',{staticClass:\"topics-list-content\",on:{\"click\":function($event){_vm.markOne(item.id)}}},[_c('router-link',{staticClass:\"topics-title\",attrs:{\"to\":'/topics/'+item.topic.id +'#'+ item.id,\"title\":item.topic.title}},[_vm._v(\"\\n                \"+_vm._s(item.topic.title)+\"\\n              \")]),_vm._v(\" \"),_c('div',{staticClass:\"topics-list-wrap\"},[_c('p',{staticClass:\"topics-reply\"},[_vm._v(\"\\n                  \"+_vm._s(item.author.loginname)+\"\\n                  ：\\n                  \"+_vm._s(item.reply.content)+\"\\n                \")]),_vm._v(\" \"),_c('span',{staticClass:\"topics-time\",attrs:{\"title\":\"回复时间\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.formatDate(item.reply.create_at))+\"\\n                \")])])],1)],1)})):_c('p',{staticClass:\"msgs-null\"},[_vm._v(\"没有消息\")])])]),_vm._v(\" \"),_c('el-aside',{staticClass:\"hidden-sm-and-down\",attrs:{\"width\":\"200px\"}},[_c('v-aside-user',{attrs:{\"userInfo\":_vm.userInfo}}),_vm._v(\" \"),_c('v-aside-qr')],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-084e28b8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Messages.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-084e28b8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Messages.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Messages.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Messages.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-084e28b8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Messages.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-084e28b8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Messages.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}